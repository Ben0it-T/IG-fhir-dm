version: 2

sources:
  - name: ehr
    description: >
      Electronic Health Records source database.
      Separate production EHR database with read-only access.
    # Different database for EHR source data
    database: "{{ env_var('EHR_DATABASE', 'ehr_production') }}"
    schema: "{{ env_var('EHR_SCHEMA', 'public') }}"
    
    tables:
      - name: patient
        description: "Patient demographics from EHR system"
        # Optional: specific database override
        database: "{{ env_var('EHR_DATABASE', 'ehr_production') }}"
        
      - name: donnees_pmsi
        description: "PMSI encounter data from EHR system"
        database: "{{ env_var('EHR_DATABASE', 'ehr_production') }}"
        
      - name: diagnostics
        description: "Diagnostic codes from EHR system"
        database: "{{ env_var('EHR_DATABASE', 'ehr_production') }}"
        
      - name: biologie  
        description: "Laboratory results from EHR system"
        database: "{{ env_var('EHR_DATABASE', 'ehr_production') }}"

  # Optional: Additional source for reference data
  - name: terminology
    description: "Terminology and coding systems"
    database: "{{ env_var('TERMINOLOGY_DATABASE', 'terminology') }}"
    schema: public
    
    tables:
      - name: icd10_codes
        description: "ICD-10 reference codes"
      - name: loinc_codes  
        description: "LOINC reference codes"
      - name: atc_codes
        description: "ATC medication codes"