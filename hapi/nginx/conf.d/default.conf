# Default server configuration for HAPI FHIR
# This file can be customized for specific domain configurations

# Redirect www to non-www (uncomment if needed)
# server {
#     listen 80;
#     listen 443 ssl http2;
#     server_name www.yourdomain.com;
#     ssl_certificate /etc/nginx/ssl/cert.pem;
#     ssl_private_key /etc/nginx/ssl/key.pem;
#     return 301 $scheme://yourdomain.com$request_uri;
# }

# Production server configuration example
# server {
#     listen 443 ssl http2;
#     listen [::]:443 ssl http2;
#     server_name yourdomain.com;
# 
#     # SSL configuration
#     ssl_certificate /etc/nginx/ssl/fullchain.pem;
#     ssl_private_key /etc/nginx/ssl/privkey.pem;
#     
#     # Include SSL security settings from main config
#     
#     # HAPI FHIR configuration
#     location /fhir {
#         limit_req zone=api burst=50 nodelay;
#         
#         proxy_pass http://hapi-fhir/fhir;
#         proxy_http_version 1.1;
#         proxy_set_header Host $host;
#         proxy_set_header X-Real-IP $remote_addr;
#         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#         proxy_set_header X-Forwarded-Proto $scheme;
#         
#         # Production CORS settings
#         add_header Access-Control-Allow-Origin "https://app.yourdomain.com" always;
#         add_header Access-Control-Allow-Credentials "true" always;
#     }
#     
#     # Root location for HAPI UI
#     location / {
#         proxy_pass http://hapi-fhir/;
#         proxy_http_version 1.1;
#         proxy_set_header Host $host;
#         proxy_set_header X-Real-IP $remote_addr;
#         proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#         proxy_set_header X-Forwarded-Proto $scheme;
#     }
# }